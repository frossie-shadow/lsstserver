# LSST build script for boost 
#
# This should work on Linux, Linux64, and DarwinX86
#
tarfile=boost_1_37_0.tar.gz

[ -n "$MPICH2_DIR" ] || { echo "mpich2 package is not setup!"; false; }

fetch external/boost/$version/$tarfile
unpack_tar_and_enter $tarfile

fetch external/boost/$version/boost-mpi-config.jam
fetch external/boost/$version/darwin.jam

cat darwin.jam >> tools/build/v2/tools/darwin.jam
rm darwin.jam
doconfig
cat boost-mpi-config.jam >> user-config.jam
make
makeinstall

cd $installdir/include
ln -s boost-*/boost boost

cd $installdir/lib
ls libboost_mpi_* > /dev/null 2>&1 || {
   echo "Failed to build/install mpi libraries"
   false
}

cd $builddir


