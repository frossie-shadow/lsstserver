# LSST build script for jaula
#
[ -n "$FLEX_DIR ] || {
  echo flex package appears not to be set up
  return 1
}
[ -n "$DOXYGEN_DIR ] || {
  echo flex package appears not to be set up
  return 1
}
vers=1.2.0

fetch external/jaula/$version/jaula-${vers}.tar.gz
unpack_tar_and_enter jaula-${vers}.tar.gz

fetch external/jaula/$version/Makefile.doc.in doc/Makefile.in
doconfig CPPFLAGS=-I$FLEX_DIR/include

echo sed -e '/GENERATE_LATEX/ s/YES/NO/' doc/Doxyfile \> Doxyfile.upd
sed -e '/GENERATE_LATEX/ s/YES/NO/' doc/Doxyfile > Doxyfile.upd
echo mv Doxyfile.upd doc/Doxyfile
mv Doxyfile.upd doc/Doxyfile

fetch external/jaula/$version/Makefile.latex 
make
mkdir -p doc/latex
echo mv Makefile.latex doc/latex/Makefile
mv Makefile.latex doc/latex/Makefile

makeinstall
